{extend name="templates/public/base.html" /}
{block name="cascade"}
<form class="layui-form layui-form-pane" action="{:url('index/partner/filter')}" method="get">
    <div class="layui-row">
        <div class="layui-input-inline layui-col-xs5">
        <select name="role" id="role">
            <option value="">角色职能</option>
            {volist name="roles" id="role"}
            <option value="{$role.id}">{$role.name}</option>
            {/volist}
        </select>
        </div>
        <div class="layui-input-inline layui-col-xs5">
        <select name="tag" id="tag">
            <option value="">个人标签</option>
            {volist name="tags" id="tag"}
            <option value="{$tag.id}">{$tag.name}</option>
            {/volist}
        </select>
        </div>
        <div class="layui-input-inline layui-col-xs2">
            <button class="layui-input" id="filter" lay-submit style="text-align:center;"><a id="filter_icon" class="glyphicon glyphicon-filter"></a></button>            
        </div>
    </div>
</form>
<br />
{/block}
{block name="main"}
<div class="layui-container-fluid">
    <div class="layui-row layui-col-space12" style="margin-left:10px;margin-right:10px;margin-bottom:10px;">                                
    {volist name="userList" id="user"}
    <div class="layui-col-md4 layui-col-xs12">
    <div class="layui-box">
      <div style="height:270px;padding:10px;background-color: #444;opacity: 0.86;color:#eee;">                                         
        <p>{$user['nickname']}&emsp;
            {switch name="user.sex"}
            {case value="1"}<i class="layui-icon" style="color:rgba(0, 162, 255, 0.651);">&#xe662;</i>{/case}
            {case value="2"}<i class="layui-icon" style="color:rgb(245, 94, 194)">&#xe661;</i>{/case}
            {default /}<i class="layui-icon" style="color:rgba(216, 216, 110, 0.938)">&#xe607;</i>
            {/switch}
        </p><br />
        {if condition="$user['tags'] != []"}
        <p>
            {volist name="user['tags']" id="tag" key="k"}
            <span 
            {switch name="k"}
            {case value="1"}class="layui-bg-red"{/case}
            {case value="2"}class="layui-bg-orange"{/case}
            {case value="3"}class="layui-bg-green"{/case}
            {case value="4"}class="layui-bg-cyan"{/case}
            {case value="5"}class="layui-bg-black"{/case}
            {case value="6"}class="layui-bg-gray"{/case}
            {default/}black
            {/switch}
            style="color:#eee;
            ;padding:4px;">{$tag}</span>
            {/volist}
        </p>
        {else /}
        <span class="layui-bg-cyan" style="padding:4px;color:#eee;">暂无标签</span><br />
        {/if}
        <br />

            {if condition="$user['role'] != []"}
            {volist name="user['role']" id="role" key="i"}
            <p>角色：{$key}</p>
            <table class="layui-table" lay-size="sm" lay-skin="nob" style="background-color:inherit;">
                <colgroup>
                  <col width="250">
                  <col width="800">
                </colgroup>
                <thead>
                </thead>
                <tbody>
                  {volist name="role" id="level"}
                  <tr height="10">
                    <td style="color:#eee;">{$key}</td>
                    <td>
                        {switch name="level"}
                        {case value="1"}
                        <div class="layui-progress layui-progress-big" style="background-color:inherit;">
                            <div class="layui-progress-bar layui-bg-orange" lay-percent="1/3"></div>
                        </div>
                        {/case}
                        {case value="2"}
                        <div class="layui-progress layui-progress-big" style="background-color:inherit;">
                            <div class="layui-progress-bar layui-bg-blue" lay-percent="2/3"></div>
                        </div>
                        {/case}
                        {case value="3"}
                        <div class="layui-progress layui-progress-big" style="background-color:inherit;">
                            <div class="layui-progress-bar" lay-percent="100%"></div>
                        </div>
                        {/case}
                        {default /}
                        {/switch}
                    </td>
                  </tr>
                  {/volist}
                </tbody>
            </table>

            {/volist}
            {else /}
            <p>角色：暂无角色信息</p><br style="line-height:110px;">
            {/if}
            <br>
            <p align="right">
                <a class="layui-btn" href={:url("index/partner/view","id=$user[id]")}>查看详情 »</a>&emsp;&emsp;
            </p>
      </div>
    </div><!--layui-box-->
    </div>
    {/volist}
    </div>
    <div class="layui-container" align="center">{$userBase->render()}</div>    
</div>
{/block}
{block name="free_js"}
{__block__}
<script>
layui.use(['form','layer','element'],function(){
    var form = layui.form;
    var layer = layui.layer;
    var element = layui.element;
});
</script>
{/block}